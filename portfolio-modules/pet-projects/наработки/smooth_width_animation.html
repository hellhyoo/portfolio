<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ê–Ω–∏–º–∞—Ü–∏—è —à–∏—Ä–∏–Ω—ã –∫–Ω–æ–ø–∫–∏</title>
  
  <style>
    body {
      background: #0c0a09;
      font-family: sans-serif;
      margin: 0;
      padding: 2rem;
      color: #a3a3a3;
    }

    .demo-section {
      padding: 2rem;
      margin-bottom: 2rem;
      border: 1px solid #333;
      border-radius: 0.5rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    h2 {
      color: #e7ffb0;
      margin: 0 0 0.5rem 0;
    }

    .note {
      font-size: 0.85rem;
      color: #a3a3a3;
      padding: 0.5rem;
      background: rgba(231, 255, 176, 0.05);
      border-radius: 0.25rem;
    }

    .good { color: #86efac; }
    .bad { color: #fca5a5; }

    /* ===============================================
       –í–ê–†–ò–ê–ù–¢ 1: –í–∞—à –æ—Ä–∏–≥–∏–Ω–∞–ª (—Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã)
       =============================================== */
    .btn-original {
      font-family: sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      padding: 0.8rem 1.8rem;
      background: transparent;
      color: #a3a3a3;
      border: 1px solid #a3a3a3;
      border-radius: 50px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: color 0.3s ease, 
                  border-color 0.3s ease,
                  width 0.3s ease; /* ‚ö†Ô∏è –®–∏—Ä–∏–Ω–∞ —á–µ—Ä–µ–∑ JS */
      align-self: center;
    }

    .btn-original:hover {
      color: #fff;
      border-color: #fff;
    }

    .btn-original span {
      transition: opacity 0.3s ease;
      white-space: nowrap;
    }

    .btn-original .text-show {
      opacity: 1;
      position: relative;
    }

    .btn-original .text-hide {
      opacity: 0;
      position: absolute;
      left: 50%;
      transform: translate(-50%);
    }

    .btn-original.active .text-show {
      opacity: 0;
      position: absolute;
      left: 50%;
      transform: translate(-50%);
    }

    .btn-original.active .text-hide {
      opacity: 1;
      position: relative;
    }

    /* ===============================================
       –í–ê–†–ò–ê–ù–¢ 2: –£–ª—É—á—à–µ–Ω–Ω—ã–π - —Ä–µ–∑–µ—Ä–≤–Ω–∞—è —à–∏—Ä–∏–Ω–∞ —á–µ—Ä–µ–∑ CSS
       =============================================== */
    .btn-improved {
      font-family: sans-serif;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      padding: 0.8rem 1.8rem;
      background: transparent;
      color: #a3a3a3;
      border: 1px solid #a3a3a3;
      border-radius: 50px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: color 0.3s ease, 
                  border-color 0.3s ease,
                  width 0.3s ease;
      align-self: center;
      /* –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ JS –Ω–µ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª */
      min-width: 200px;
      width: var(--btn-width, auto);
    }

    .btn-improved:hover {
      color: #fff;
      border-color: #fff;
    }

    .btn-improved span {
      transition: opacity 0.3s ease;
      white-space: nowrap;
    }

    .btn-improved .text-show {
      opacity: 1;
      position: relative;
    }

    .btn-improved .text-hide {
      opacity: 0;
      position: absolute;
      left: 50%;
      transform: translate(-50%);
    }

    .btn-improved.active .text-show {
      opacity: 0;
      position: absolute;
      left: 50%;
      transform: translate(-50%);
    }

    .btn-improved.active .text-hide {
      opacity: 1;
      position: relative;
    }

    /* ===============================================
       –í–ê–†–ò–ê–ù–¢ 3: Grid —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —à–∏—Ä–∏–Ω–æ–π (–±–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–∏)
       =============================================== */
    .btn-grid-static {
      font-family: sans-serif;
      display: inline-grid;
      place-items: center;
      padding: 0.8rem 1.8rem;
      background: transparent;
      color: #a3a3a3;
      border: 1px solid #a3a3a3;
      border-radius: 50px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: color 0.3s ease, 
                  border-color 0.3s ease;
      width: fit-content;
      align-self: center;
    }

    .btn-grid-static:hover {
      color: #fff;
      border-color: #fff;
    }

    .btn-grid-static span {
      grid-area: 1 / 1;
      transition: opacity 0.3s ease;
      white-space: nowrap;
    }

    .btn-grid-static .text-hide {
      opacity: 0;
    }

    .btn-grid-static.active .text-show {
      opacity: 0;
    }

    .btn-grid-static.active .text-hide {
      opacity: 1;
    }

    /* ===============================================
       –í–ê–†–ò–ê–ù–¢ 4: ResizeObserver (—Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π)
       =============================================== */
    .btn-observer {
      font-family: sans-serif;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      padding: 0.8rem 1.8rem;
      background: transparent;
      color: #a3a3a3;
      border: 1px solid #a3a3a3;
      border-radius: 50px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: color 0.3s ease, 
                  border-color 0.3s ease,
                  width 0.3s ease;
      align-self: center;
    }

    .btn-observer:hover {
      color: #fff;
      border-color: #fff;
    }

    .btn-observer span {
      transition: opacity 0.3s ease;
      white-space: nowrap;
    }

    .btn-observer .text-show {
      opacity: 1;
      position: relative;
    }

    .btn-observer .text-hide {
      opacity: 0;
      position: absolute;
      left: 50%;
      transform: translate(-50%);
    }

    .btn-observer.active .text-show {
      opacity: 0;
      position: absolute;
      left: 50%;
      transform: translate(-50%);
    }

    .btn-observer.active .text-hide {
      opacity: 1;
      position: relative;
    }

    /* ===============================================
       –í–ê–†–ò–ê–ù–¢ 5: –ú–æ–Ω–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç (–∫—Ä–µ–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)
       =============================================== */
    .btn-mono {
      font-family: 'Courier New', monospace;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      padding: 0.8rem 1.8rem;
      background: transparent;
      color: #a3a3a3;
      border: 1px solid #a3a3a3;
      border-radius: 50px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: color 0.3s ease, 
                  border-color 0.3s ease;
      align-self: center;
      /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –ø–æ–¥ 20 —Å–∏–º–≤–æ–ª–æ–≤ */
      width: 20ch;
    }

    .btn-mono:hover {
      color: #fff;
      border-color: #fff;
    }

    .btn-mono span {
      transition: opacity 0.3s ease;
      white-space: nowrap;
    }

    .btn-mono .text-show {
      opacity: 1;
      position: relative;
    }

    .btn-mono .text-hide {
      opacity: 0;
      position: absolute;
      left: 50%;
      transform: translate(-50%);
    }

    .btn-mono.active .text-show {
      opacity: 0;
      position: absolute;
      left: 50%;
      transform: translate(-50%);
    }

    .btn-mono.active .text-hide {
      opacity: 1;
      position: relative;
    }

    .comparison-table {
      margin-top: 1rem;
      font-size: 0.8rem;
      border-collapse: collapse;
      width: 100%;
    }

    .comparison-table th,
    .comparison-table td {
      padding: 0.5rem;
      text-align: left;
      border-bottom: 1px solid #333;
    }

    .comparison-table th {
      color: #e7ffb0;
    }
  </style>
</head>
<body>
  <h1 style="color: #e7ffb0; margin-bottom: 2rem;">–ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —à–∏—Ä–∏–Ω—ã –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–µ–∫—Å—Ç–∞</h1>

  <!-- –í–ê–†–ò–ê–ù–¢ 1 -->
  <div class="demo-section">
    <h2>1. –í–∞—à –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç</h2>
    <p class="note">
      <span class="good">‚úÖ –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —à–∏—Ä–∏–Ω—ã</span><br>
      <span class="bad">‚ùå –ó–∞–≤–∏—Å–∏—Ç –æ—Ç DOMContentLoaded</span><br>
      <span class="bad">‚ùå –ù–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ zoom</span><br>
      <span class="bad">‚ùå Race condition —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —à—Ä–∏—Ñ—Ç–æ–≤</span>
    </p>
    
    <button class="btn-original" id="btn1">
      <span class="text-show">–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</span>
      <span class="text-hide">–°–∫—Ä—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</span>
    </button>
  </div>

  <!-- –í–ê–†–ò–ê–ù–¢ 2 -->
  <div class="demo-section">
    <h2>2. –£–ª—É—á—à–µ–Ω–Ω—ã–π —Å CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏</h2>
    <p class="note">
      <span class="good">‚úÖ –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —à–∏—Ä–∏–Ω—ã</span><br>
      <span class="good">‚úÖ –†–µ–∑–µ—Ä–≤–Ω–∞—è —à–∏—Ä–∏–Ω–∞ —á–µ—Ä–µ–∑ CSS</span><br>
      <span class="good">‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –µ—Å–ª–∏ JS –æ—Ç–∫–ª—é—á–µ–Ω</span><br>
      <span class="bad">‚ùå –í—Å–µ –µ—â–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç JS –¥–ª—è —Ç–æ—á–Ω–æ–π —à–∏—Ä–∏–Ω—ã</span>
    </p>
    
    <button class="btn-improved" id="btn2">
      <span class="text-show">–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</span>
      <span class="text-hide">–°–∫—Ä—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</span>
    </button>
  </div>

  <!-- –í–ê–†–ò–ê–ù–¢ 3 -->
  <div class="demo-section">
    <h2>3. Grid –±–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–∏ —à–∏—Ä–∏–Ω—ã</h2>
    <p class="note">
      <span class="bad">‚ùå –ù–ï–¢ –∞–Ω–∏–º–∞—Ü–∏–∏ —à–∏—Ä–∏–Ω—ã - –∫–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ç–∏—á–Ω–∞</span><br>
      <span class="good">‚úÖ –ù–µ –Ω—É–∂–µ–Ω JS</span><br>
      <span class="good">‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ zoom</span>
    </p>
    
    <button class="btn-grid-static" id="btn3">
      <span class="text-show">–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</span>
      <span class="text-hide">–°–∫—Ä—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</span>
    </button>
    
    <p style="font-size: 0.8rem; color: #fca5a5;">
      ‚ö†Ô∏è –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: —à–∏—Ä–∏–Ω–∞ –∫–Ω–æ–ø–∫–∏ –ù–ï –º–µ–Ω—è–µ—Ç—Å—è, –æ–Ω–∞ –≤—Å–µ–≥–¥–∞ —Ä–∞–≤–Ω–∞ —Å–∞–º–æ–º—É –¥–ª–∏–Ω–Ω–æ–º—É —Ç–µ–∫—Å—Ç—É
    </p>
  </div>

  <!-- –í–ê–†–ò–ê–ù–¢ 4 -->
  <div class="demo-section">
    <h2>4. ResizeObserver (—Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π) ‚≠ê</h2>
    <p class="note">
      <span class="good">‚úÖ –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —à–∏—Ä–∏–Ω—ã</span><br>
      <span class="good">‚úÖ –†–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ zoom</span><br>
      <span class="good">‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π —à—Ä–∏—Ñ—Ç–æ–≤</span><br>
      <span class="good">‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è</span>
    </p>
    
    <button class="btn-observer" id="btn4">
      <span class="text-show">–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</span>
      <span class="text-hide">–°–∫—Ä—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</span>
    </button>
    
    <p style="font-size: 0.8rem; color: #86efac;">
      üí° –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å zoom (Ctrl/Cmd +/-) - —ç—Ç–∞ –∫–Ω–æ–ø–∫–∞ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è!
    </p>
  </div>

  <!-- –í–ê–†–ò–ê–ù–¢ 5 -->
  <div class="demo-section">
    <h2>5. –ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç (–∫—Ä–µ–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)</h2>
    <p class="note">
      <span class="good">‚úÖ –ù–µ –Ω—É–∂–µ–Ω JS –≤–æ–æ–±—â–µ</span><br>
      <span class="good">‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è —à–∏—Ä–∏–Ω–∞ —á–µ—Ä–µ–∑ ch</span><br>
      <span class="bad">‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω –≤–∏–∑—É–∞–ª—å–Ω–æ</span><br>
      <span class="bad">‚ùå –ù—É–∂–Ω–æ –ø–æ–¥–±–∏—Ä–∞—Ç—å —à–∏—Ä–∏–Ω—É –≤—Ä—É—á–Ω—É—é</span>
    </p>
    
    <button class="btn-mono" id="btn5">
      <span class="text-show">Show details</span>
      <span class="text-hide">Hide details</span>
    </button>
    
    <p style="font-size: 0.8rem;">
      üí° –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–Ω–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç + width: 20ch
    </p>
  </div>

  <!-- –°–†–ê–í–ù–ò–¢–ï–õ–¨–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê -->
  <div class="demo-section">
    <h2>–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞</h2>
    <table class="comparison-table">
      <thead>
        <tr>
          <th>–†–µ—à–µ–Ω–∏–µ</th>
          <th>–ê–Ω–∏–º–∞—Ü–∏—è —à–∏—Ä–∏–Ω—ã</th>
          <th>–ù—É–∂–µ–Ω JS</th>
          <th>Zoom —Ä–∞–±–æ—Ç–∞–µ—Ç</th>
          <th>–°–ª–æ–∂–Ω–æ—Å—Ç—å</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1. –û—Ä–∏–≥–∏–Ω–∞–ª</td>
          <td class="good">‚úÖ –î–∞</td>
          <td class="bad">‚ùå –î–∞</td>
          <td class="bad">‚ùå –ù–µ—Ç</td>
          <td>üî¥ –í—ã—Å–æ–∫–∞—è</td>
        </tr>
        <tr>
          <td>2. CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ</td>
          <td class="good">‚úÖ –î–∞</td>
          <td class="bad">‚ùå –î–∞</td>
          <td class="bad">‚ùå –ù–µ—Ç</td>
          <td>üü° –°—Ä–µ–¥–Ω—è—è</td>
        </tr>
        <tr>
          <td>3. Grid —Å—Ç–∞—Ç–∏—á–Ω—ã–π</td>
          <td class="bad">‚ùå –ù–µ—Ç</td>
          <td class="good">‚úÖ –ù–µ—Ç</td>
          <td class="good">‚úÖ –î–∞</td>
          <td>üü¢ –ù–∏–∑–∫–∞—è</td>
        </tr>
        <tr>
          <td>4. ResizeObserver ‚≠ê</td>
          <td class="good">‚úÖ –î–∞</td>
          <td class="bad">‚ùå –î–∞</td>
          <td class="good">‚úÖ –î–∞</td>
          <td>üü° –°—Ä–µ–¥–Ω—è—è</td>
        </tr>
        <tr>
          <td>5. –ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π</td>
          <td class="bad">‚ùå –ù–µ—Ç*</td>
          <td class="good">‚úÖ –ù–µ—Ç</td>
          <td class="good">‚úÖ –î–∞</td>
          <td>üü¢ –ù–∏–∑–∫–∞—è</td>
        </tr>
      </tbody>
    </table>
    <p style="font-size: 0.75rem; margin-top: 0.5rem;">* –®–∏—Ä–∏–Ω–∞ —Å—Ç–∞—Ç–∏—á–Ω–∞, –Ω–æ —Ç–µ–∫—Å—Ç –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–π —à–∏—Ä–∏–Ω—ã</p>
  </div>

  <script>
    // ============================================
    // –í–ê–†–ò–ê–ù–¢ 1: –û—Ä–∏–≥–∏–Ω–∞–ª
    // ============================================
    const btn1 = document.getElementById('btn1');
    let width1Show, width1Hide;

    window.addEventListener('DOMContentLoaded', () => {
      const span1Show = btn1.querySelector('.text-show');
      const span1Hide = btn1.querySelector('.text-hide');
      
      const style = getComputedStyle(btn1);
      const padding = parseFloat(style.paddingLeft) + parseFloat(style.paddingRight);
      const border = parseFloat(style.borderLeftWidth) + parseFloat(style.borderRightWidth);
      const offset = padding + border;
      
      width1Show = span1Show.offsetWidth + offset;
      width1Hide = span1Hide.offsetWidth + offset;
      
      btn1.style.width = `${width1Show}px`;
    });

    btn1.addEventListener('click', () => {
      btn1.classList.toggle('active');
      btn1.style.width = btn1.classList.contains('active') 
        ? `${width1Hide}px` 
        : `${width1Show}px`;
    });

    // ============================================
    // –í–ê–†–ò–ê–ù–¢ 2: –° CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
    // ============================================
    const btn2 = document.getElementById('btn2');
    
    function measureButton2() {
      const span2Show = btn2.querySelector('.text-show');
      const span2Hide = btn2.querySelector('.text-hide');
      
      const style = getComputedStyle(btn2);
      const padding = parseFloat(style.paddingLeft) + parseFloat(style.paddingRight);
      const border = parseFloat(style.borderLeftWidth) + parseFloat(style.borderRightWidth);
      const offset = padding + border;
      
      const widthShow = span2Show.offsetWidth + offset;
      const widthHide = span2Hide.offsetWidth + offset;
      
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
      btn2.style.setProperty('--width-show', `${widthShow}px`);
      btn2.style.setProperty('--width-hide', `${widthHide}px`);
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é —à–∏—Ä–∏–Ω—É
      btn2.style.setProperty('--btn-width', `${widthShow}px`);
    }

    window.addEventListener('DOMContentLoaded', measureButton2);

    btn2.addEventListener('click', () => {
      btn2.classList.toggle('active');
      const isActive = btn2.classList.contains('active');
      btn2.style.setProperty('--btn-width', 
        isActive 
          ? 'var(--width-hide)' 
          : 'var(--width-show)'
      );
    });

    // ============================================
    // –í–ê–†–ò–ê–ù–¢ 3: –ü—Ä–æ—Å—Ç–æ–π toggle
    // ============================================
    const btn3 = document.getElementById('btn3');
    btn3.addEventListener('click', () => {
      btn3.classList.toggle('active');
    });

    // ============================================
    // –í–ê–†–ò–ê–ù–¢ 4: ResizeObserver (–õ–£–ß–®–ï–ï –†–ï–®–ï–ù–ò–ï)
    // ============================================
    const btn4 = document.getElementById('btn4');
    const span4Show = btn4.querySelector('.text-show');
    const span4Hide = btn4.querySelector('.text-hide');

    // –°–∫—Ä—ã—Ç—ã–µ –∏–∑–º–µ—Ä–∏—Ç–µ–ª–∏ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
    const measureShow = document.createElement('span');
    const measureHide = document.createElement('span');
    
    measureShow.style.cssText = 'position: absolute; visibility: hidden; white-space: nowrap;';
    measureHide.style.cssText = 'position: absolute; visibility: hidden; white-space: nowrap;';
    
    measureShow.textContent = span4Show.textContent;
    measureHide.textContent = span4Hide.textContent;
    
    btn4.appendChild(measureShow);
    btn4.appendChild(measureHide);

    function updateBtn4Width() {
      const style = getComputedStyle(btn4);
      const padding = parseFloat(style.paddingLeft) + parseFloat(style.paddingRight);
      const border = parseFloat(style.borderLeftWidth) + parseFloat(style.borderRightWidth);
      const offset = padding + border;
      
      const widthShow = measureShow.offsetWidth + offset;
      const widthHide = measureHide.offsetWidth + offset;
      
      const targetWidth = btn4.classList.contains('active') ? widthHide : widthShow;
      btn4.style.width = `${targetWidth}px`;
    }

    // –°–ª–µ–¥–∏–º –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ —Ä–∞–∑–º–µ—Ä–∞ (zoom, –∑–∞–≥—Ä—É–∑–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤)
    const observer = new ResizeObserver(() => {
      updateBtn4Width();
    });

    observer.observe(measureShow);
    observer.observe(measureHide);

    // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
    requestAnimationFrame(() => {
      updateBtn4Width();
    });

    btn4.addEventListener('click', () => {
      btn4.classList.toggle('active');
      updateBtn4Width();
    });

    // ============================================
    // –í–ê–†–ò–ê–ù–¢ 5: –ü—Ä–æ—Å—Ç–æ–π toggle
    // ============================================
    const btn5 = document.getElementById('btn5');
    btn5.addEventListener('click', () => {
      btn5.classList.toggle('active');
    });

    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
    console.log('üí° –ò–∑–º–µ–Ω–∏—Ç–µ zoom –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl/Cmd +/-) –∏ –ø–æ–Ω–∞–∂–∏–º–∞–π—Ç–µ –∫–Ω–æ–ø–∫–∏');
    console.log('üìä –ö–Ω–æ–ø–∫–∞ #4 —Å ResizeObserver –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è');
  </script>
</body>
</html>